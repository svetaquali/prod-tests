spec_version: 2
description: deploy azure vm

inputs:
  agent:
    type: agent
  resource_group:
    type: string
    default: "sveta-rg"

grains:
  rg1:
    kind: terraform
    spec:
      source:
        store: bps
        path: terraform/azure_rg
      agent:
        name: '{{ .inputs.agent }}'
        isolated: false
      inputs:
        - resource_group: '{{.inputs.resource_group}}'
      env-vars:
        # - ARM_USE_OIDC: true
        - MY_VAR2: 'my value2'
  
  # echo_env:
  #   kind: shell
  #   spec:
  #     agent:
  #       name: '{{ .inputs.agent }}'
  #     activities:
  #       deploy:
  #         commands:
  #           - printenv
  #     env-vars:
  #       - MY_VAR1: 'my value1'
      
      
      
